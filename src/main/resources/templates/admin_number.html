<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<body>
<div th:if="${action == 'number_change'} or ${action == 'number_list'} or ${action == 'number_add'}" th:fragment="number_options" class="relative">
    <div class="title" th:if="${action == 'number_add'}">Добавление номера</div>
    <div class="page_title" th:if="${action == 'number_change'} or ${action == 'number_list'}">Изменение номера</div>
    <form method="post" th:if="${action == 'number_add'} or ${action == 'number_change'}" th:attr="action=@{${action == 'number_add'?'/admin/number_add':'/admin/number_change'}}" th:object="${number}">
        <a th:if="${action == 'number_change'}"  th:href="@{/admin/number_delete(id=${number.id})}"><img title="удалить" class="remove_img" src="/images/delete.png"></a>
        <input th:if="${action == 'number_change'}" th:field="*{id}" id="number_id" name="number_id" type="hidden">
        <input th:if="${action == 'number_change'}" th:field="*{journalId}" id="journal_id" name="journal_id" type="hidden">
        <label th:if="${action == 'number_add'}" for="journal_name">Журнал</label>
        <select class="select-css"  th:if="${action == 'number_add'}" name="journal_name" th:field="*{journalId}">
            <option th:selected="selected" readonly th:value="0">Журнал</option>
            <option th:each="journal : ${journals}" th:value="${journal.id}" th:text="${journal.name}"></option>
        </select>
        <small class="input_error" th:each="err : ${#fields.errors('journalId')}" th:text="${err}"></small>



        <div class="form__group field">
            <input class="form__field" th:field="*{name}" placeholder="Название" id="name" name="name" type="text" >
            <label class="form__label">Название</label>
        </div>
        <small class="input_error" th:each="err : ${#fields.errors('name')}" th:text="${err}"></small>

        <div class="form__group field">
            <input class="form__field" th:field="*{descript}" placeholder="Описание" id="descript" name="descript" type="text" >
            <label class="form__label">Описание</label>
        </div>
        <small class="input_error" th:each="err : ${#fields.errors('descript')}" th:text="${err}"></small>


        <div class="form__group field">
            <input class="form__field" th:field="*{year}" placeholder="Год" id="year" name="year" type="text" >
            <label class="form__label">Год</label>
        </div>
        <small class="input_error" th:each="err : ${#fields.errors('year')}" th:text="${err}"></small>

        <input class="custom-checkbox active" id="checkbox_active" type="checkbox" name="checkbox_active">
        <label for="checkbox_active">Активировать</label>
        <input th:field="*{active}" class="checkbox_value"  id="active" name="active" th:value="0" type="hidden">



        <input th:if="${action == 'number_add'}" id="submit" value="Добавить номер" type="submit">
        <input th:if="${action == 'number_change'}"  id="submit" value="Сохранить номер" type="submit">
        <!--                <label for="jr_active">Активировать</label>-->
        <!--                <input th:field="*{jr_active}"  id="jr_active" name="jr_active" type="checkbox">-->
    </form>

    <div th:if="${journals != null} and ${action == 'number_list'}" th:each="journal : ${journals}">
        <div class="admin_card_item">
            <a th:href="@{/admin/journal_delete(id=${journal.id})}"><img title="удалить" class="remove_img" src="/images/delete.png"></a>
            <div><a class="black_link" th:href="@{/admin/journal_change('id'=${journal.id})}" th:text="${journal.name}"></a></div>
            <div><img class="journal_img" th:if="${journal.cover != null and #strings.length(journal.cover) > 0}" th:src="@{'/covers/'+${journal.cover}}">
                <div class="jurnal_short_info">
                    <div class="number_line" th:each="number : ${numberSortedList.get(journal)}">
                        <span class="number_year" th:text="${number.key}+': '"></span>
                        <div class="number_val" th:each="num : ${number.value}">
                            <a th:href="@{/admin/number_change('id'=${num.id})}"><span
                                    th:text="${num.name}"></span></a>
                        </div>
                    </div>
                </div>
            </div>


        </div>
    </div>
</div>
</body>
</html>